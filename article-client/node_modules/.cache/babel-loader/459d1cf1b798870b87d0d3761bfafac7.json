{"ast":null,"code":"var _jsxFileName = \"/home/NIX/shchebetovskyi/practice/article-client/src/components/article/articlePage/ArticlePage.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport { addArticleToAuthor, getAllAuthors } from \"../../../dal/server/authors-api\";\nimport styles from \"./article-page.module.css\";\nimport { deleteArticle, getArticle } from \"../../../dal/server/articles-api\";\nimport ArticleRedo from \"./ArticleRedo\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ArticlePage = props => {\n  _s();\n\n  const history = useHistory();\n  const [articleState, setArticleState] = useState(null);\n  const [authorState, setauthorState] = useState(null);\n  const [isRedoMenuOpen, setIsRedoMenuOpen] = useState(false);\n  useEffect(() => {\n    getAllAuthors().then(resp => {\n      const allAuthors = resp.data;\n      setauthorState(allAuthors);\n    });\n  }, []);\n  useEffect(() => {\n    getArticle(window.location.href.split(\"/\")[5]).then(resp => {\n      const article = resp.data;\n      setArticleState(article);\n    });\n  }, []);\n\n  const sendAuthorToArticleRequest = authorId => {\n    addArticleToAuthor(authorId, window.location.href.split(\"/\")[5]).then(response => {\n      console.log(response);\n      window.location.reload();\n    }).catch(e => console.log(e.response));\n  };\n\n  const deleteArticleOnServer = () => {\n    deleteArticle(window.location.href.split(\"/\")[5]).then(response => {\n      console.log(response);\n      history.push(\"/articles\");\n    }).catch(e => console.log(e.response));\n  };\n\n  const redirectToAuthor = id => {\n    history.push(`/authors/show/${id}`);\n  };\n\n  const toggleRedoMenu = () => {\n    setIsRedoMenuOpen(prev => !prev);\n  };\n\n  console.log(isRedoMenuOpen);\n  if (articleState === null || authorState === null) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"Downloading...\"\n  }, void 0, false);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.article,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.name,\n      children: articleState.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.description,\n      children: articleState.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.authors,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.text,\n        children: \"Authors: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), articleState.authors.map(author => {\n        return /*#__PURE__*/_jsxDEV(\"a\", {\n          className: styles.author + \" link\",\n          onClick: () => redirectToAuthor(author.id),\n          children: [author.name, \" |\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: styles.btnToggleRedo + (isRedoMenuOpen ? \" \" + styles.__opened : \"\"),\n      onClick: toggleRedoMenu,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: 'https://cdn-icons-png.flaticon.com/512/709/709586.png',\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.btnText,\n        children: \"Edit menu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), isRedoMenuOpen && /*#__PURE__*/_jsxDEV(ArticleRedo, {\n      articleState: articleState,\n      authorState: authorState,\n      sendAuthorToArticleRequest: sendAuthorToArticleRequest,\n      deleteArticleOnServer: deleteArticleOnServer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ArticlePage, \"1wGtRZAaC6oQUTHHaJJlrP3O97w=\", false, function () {\n  return [useHistory];\n});\n\n_c = ArticlePage;\nexport default ArticlePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ArticlePage\");","map":{"version":3,"sources":["/home/NIX/shchebetovskyi/practice/article-client/src/components/article/articlePage/ArticlePage.jsx"],"names":["useEffect","useState","Link","useHistory","addArticleToAuthor","getAllAuthors","styles","deleteArticle","getArticle","ArticleRedo","ArticlePage","props","history","articleState","setArticleState","authorState","setauthorState","isRedoMenuOpen","setIsRedoMenuOpen","then","resp","allAuthors","data","window","location","href","split","article","sendAuthorToArticleRequest","authorId","response","console","log","reload","catch","e","deleteArticleOnServer","push","redirectToAuthor","id","toggleRedoMenu","prev","name","description","authors","text","map","author","btnToggleRedo","__opened","btnText"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport {\n    addArticleToAuthor,\n    getAllAuthors,\n} from \"../../../dal/server/authors-api\";\nimport styles from \"./article-page.module.css\";\nimport { deleteArticle, getArticle } from \"../../../dal/server/articles-api\";\nimport ArticleRedo from \"./ArticleRedo\";\n\nconst ArticlePage = (props) => {\n    const history = useHistory();\n\n    const [articleState, setArticleState] = useState(null);\n    const [authorState, setauthorState] = useState(null);\n\n    const [isRedoMenuOpen, setIsRedoMenuOpen] = useState(false);\n\n    useEffect(() => {\n        getAllAuthors().then((resp) => {\n            const allAuthors = resp.data;\n            setauthorState(allAuthors);\n        });\n    }, []);\n\n    useEffect(() => {\n        getArticle(window.location.href.split(\"/\")[5]).then((resp) => {\n            const article = resp.data;\n            setArticleState(article);\n        });\n    }, []);\n\n    const sendAuthorToArticleRequest = (authorId) => {\n        addArticleToAuthor(authorId, window.location.href.split(\"/\")[5])\n            .then((response) => {\n                console.log(response);\n                window.location.reload();\n            })\n            .catch((e) => console.log(e.response));\n    };\n\n    const deleteArticleOnServer = () => {\n        deleteArticle(window.location.href.split(\"/\")[5])\n            .then((response) => {\n                console.log(response);\n                history.push(\"/articles\");\n            })\n            .catch((e) => console.log(e.response));\n    };\n\n    const redirectToAuthor = (id) => {\n        history.push(`/authors/show/${id}`);\n    };\n\n    const toggleRedoMenu = () => {\n        setIsRedoMenuOpen((prev) => !prev);\n    };\n    console.log(isRedoMenuOpen)\n    if (articleState === null || authorState === null)\n        return <>Downloading...</>;\n\n    return (\n        <div className={styles.article}>\n            <div className={styles.name}>{articleState.name}</div>\n            <div className={styles.description}>\n                {articleState.description}\n            </div>\n            <div className={styles.authors}>\n                <span className={styles.text}>Authors: </span>\n                {articleState.authors.map((author) => {\n                    return (\n                        <a\n                            className={styles.author + \" link\"}\n                            onClick={() => redirectToAuthor(author.id)}\n                        >\n                            {author.name} |{\" \"}\n                        </a>\n                    );\n                })}\n            </div>\n            <button className={styles.btnToggleRedo + (isRedoMenuOpen ? \" \" + styles.__opened : \"\")} onClick={toggleRedoMenu}>\n                <img src={'https://cdn-icons-png.flaticon.com/512/709/709586.png'} alt=\"\" />\n                <div className={styles.btnText}>Edit menu</div> \n                \n            </button>\n            {isRedoMenuOpen && (\n                <ArticleRedo\n                    articleState={articleState}\n                    authorState={authorState}\n                    sendAuthorToArticleRequest={sendAuthorToArticleRequest}\n                    deleteArticleOnServer={deleteArticleOnServer}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default ArticlePage;\n"]},"metadata":{},"sourceType":"module"}